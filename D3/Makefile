# Makefile for 3rd derivative calculations - D3

include ../make.sys

D3OBJS = \
allocate_d3.o \
bcast_d3_input.o \
ch_psi_all2.o \
close_open.o \
d0rhod2v.o \
d2mxc.o \
d3_exc.o \
d3_init.o \
d3_readin.o \
d3_recover.o \
d3_setup.o \
d3_summary.o \
d3_symdyn.o \
d3_symdynph.o \
d3_valence.o \
d3com.o \
d3dyn_cc.o \
d3ionq.o \
d3matrix.o \
d3toten.o \
d3vrho.o \
davcio_drho2.o \
dpsi_corr.o \
dpsidpsidv.o \
dpsidvdpsi.o \
dqrhod2v.o \
drho_cc.o \
drho_drc.o \
drhod2v.o \
dvdpsi.o \
dvscf.o \
gen_dpdvp.o \
gen_dwfc.o \
incdrhoscf2.o \
openfild3.o \
print_clock_d3.o \
psymd0rho.o \
qstar_d3.o \
read_ef.o \
rotate_and_add_d3.o \
set_d3irr.o \
set_efsh.o \
set_sym_irr.o \
sgama_d3.o \
solve_linter_d3.o \
stop_d3.o \
sym_def1.o \
symd0rho.o \
trntnsc_3.o \
w_1gauss.o \
write_aux.o \
write_d3dyn.o \
write_igk.o \
writed3dyn_5.o

PHOBJS = \
../PH/add_dkmds.o \
../PH/add_for_charges.o \
../PH/addcore.o \
../PH/adddvepsi_us.o \
../PH/adddvscf.o \
../PH/addnlcc.o \
../PH/addnlcc_zstar_eu_us.o \
../PH/addusdbec.o \
../PH/addusddens.o \
../PH/addusddense.o \
../PH/addusdynmat.o \
../PH/addusldos.o \
../PH/allocate_part.o \
../PH/bcast_ph_input.o \
../PH/allocate_phq.o \
../PH/bcast_ph_input1.o \
../PH/cg_psi.o \
../PH/cgsolve_all.o \
../PH/ch_psi_all.o \
../PH/compute_alphasum.o \
../PH/compute_becalp.o \
../PH/compute_becsum.o \
../PH/compute_drhous.o \
../PH/compute_dvloc.o \
../PH/compute_nldyn.o \
../PH/compute_qdipol.o \
../PH/compute_weight.o \
../PH/deallocate_part.o \
../PH/d2ionq.o \
../PH/davcio_drho.o \
../PH/dgcxc.o \
../PH/dgcxc_spin.o \
../PH/dgradcorr.o \
../PH/dielec.o \
../PH/drho.o \
../PH/drhodv.o \
../PH/drhodvloc.o \
../PH/drhodvnl.o \
../PH/drhodvus.o \
../PH/dv_of_drho.o \
../PH/dvanqq.o \
../PH/dvkb3.o \
../PH/dvqpsi_us.o \
../PH/dvqpsi_us_only.o \
../PH/dyndia.o \
../PH/dynmat0.o \
../PH/dynmat_us.o \
../PH/dynmatcc.o \
../PH/ef_shift.o \
../PH/elph.o \
../PH/h_psiq.o \
../PH/incdrhoscf.o \
../PH/incdrhous.o \
../PH/io_pattern.o \
../PH/localdos.o \
../PH/newdq.o \
../PH/phcom.o \
../PH/phq_init.o \
../PH/phq_recover.o \
../PH/phq_setup.o \
../PH/phq_summary.o \
../PH/print_clock_ph.o \
../PH/psidspsi.o \
../PH/psymdvscf.o \
../PH/psyme.o \
../PH/punch_plot_e.o \
../PH/punch_plot_ph.o \
../PH/q2qstar_ph.o \
../PH/ramanm.o \
../PH/random_matrix.o \
../PH/rotate_and_add_dyn.o \
../PH/set_drhoc.o \
../PH/set_irr.o \
../PH/set_irr_mode.o \
../PH/set_irr_nosym.o \
../PH/setlocq.o \
../PH/setqmod.o \
../PH/setup_dgc.o \
../PH/smallgq.o \
../PH/star_q.o \
../PH/stop_ph.o \
../PH/sym_and_write_zue.o \
../PH/sym_def.o \
../PH/symdvscf.o \
../PH/symdyn_munu.o \
../PH/symdynph_gq.o \
../PH/syme.o \
../PH/tra_write_matrix.o \
../PH/trntnsc.o \
../PH/write_dyn_on_file.o \
../PH/write_epsilon_and_zeu.o \
../PH/write_matrix.o \
../PH/zstar_eu.o \
../PH/zstar_eu_us.o

MODULES = \
../Modules/atom.o \
../Modules/cell_base.o \
../Modules/clocks.o \
../Modules/check_stop.o \
../Modules/constants.o \
../Modules/control_flags.o \
../Modules/fft_base.o \
../Modules/fft_scalar.o \
../Modules/fft_types.o \
../Modules/functionals.o \
../Modules/io_base.o \
../Modules/io_files.o \
../Modules/io_global.o \
../Modules/ions_base.o \
../Modules/input_parameters.o \
../Modules/kind.o \
../Modules/mp_global.o \
../Modules/mp_wave.o \
../Modules/mp.o \
../Modules/parallel_include.o \
../Modules/parameters.o \
../Modules/parser.o \
../Modules/printout_base.o \
../Modules/pseudo_types.o \
../Modules/ptoolkit.o \
../Modules/random_numbers.o \
../Modules/read_upf.o \
../Modules/read_uspp.o \
../Modules/recvec.o \
../Modules/shmem_include.o \
../Modules/task_groups.o \
../Modules/splinelib.o \
../Modules/stick_base.o \
../Modules/uspp.o \
../Modules/timestep.o \
../Modules/version.o \
../Modules/wavefunctions.o \
../Modules/xml_io_base.o

PWOBJS = \
../PW/add_bfield.o \
../PW/add_efield.o \
../PW/add_vuspsi.o \
../PW/add_vuspsi_nc.o \
../PW/addusdens.o \
../PW/allocate_fft.o \
../PW/allocate_locpot.o \
../PW/allocate_nlpot.o \
../PW/allocate_wfc.o \
../PW/atomic_rho.o \
../PW/atomic_wfc.o \
../PW/atomic_wfc_nc.o \
../PW/becmod.o \
../PW/bp_calc_btq.o \
../PW/bp_qvan3.o \
../PW/bp_radin.o \
../PW/bp_ylm_q.o \
../PW/c_gemm.o \
../PW/ccalbec.o \
../PW/ccalbec_nc.o \
../PW/ccgdiagg.o \
../PW/cdiagh.o \
../PW/cdiaghg.o \
../PW/cegterg.o \
../PW/cdiisg_nc.o \
../PW/cft3.o \
../PW/cft3s.o \
../PW/cgramg1.o \
../PW/cgramg1_nc.o \
../PW/checkallsym.o \
../PW/checksym.o \
../PW/cinitcgg.o \
../PW/close_files.o \
../PW/compute_dip.o \
../PW/compute_rho.o \
../PW/coset.o \
../PW/cryst_to_car.o \
../PW/cubicsym.o \
../PW/d_matrix.o \
../PW/data_structure.o \
../PW/davcio.o \
../PW/deriv_drhoc.o \
../PW/diropn.o \
../PW/divide.o \
../PW/divide_et_impera.o \
../PW/dndepsilon.o \
../PW/dprojdepsilon.o \
../PW/dprojdtau.o \
../PW/dqvan2.o \
../PW/drhoc.o \
../PW/dvloc_of_g.o \
../PW/efermig.o \
../PW/efermit.o \
../PW/eqvect.o \
../PW/error_handler.o \
../PW/estimate.o \
../PW/exx.o \
../PW/ewald.o \
../PW/fftw.o \
../PW/g_psi.o \
../PW/g_psi_nc.o \
../PW/g_psi_mod.o \
../PW/gen_at_dj.o \
../PW/gen_at_dy.o \
../PW/gen_us_dj.o \
../PW/gen_us_dy.o \
../PW/get_locals.o \
../PW/ggen.o \
../PW/gk_sort.o \
../PW/gradcorr.o \
../PW/gweights.o \
../PW/h_1psi.o \
../PW/h_1psi_nc.o \
../PW/h_epsi_her.o \
../PW/h_psi.o \
../PW/h_psi_nc.o \
../PW/hexsym.o \
../PW/hinit0.o \
../PW/hinit1.o \
../PW/init_ns.o \
../PW/init_pool.o \
../PW/init_us_1.o \
../PW/init_us_2.o \
../PW/init_at_1.o \
../PW/init_vloc.o \
../PW/interpolate.o \
../PW/inverse_s.o \
../PW/io_pot.o \
../PW/irrek.o \
../PW/iweights.o \
../PW/kpoint_grid.o \
../PW/lchk_tauxk.o \
../PW/linmin.o \
../PW/make_pointlists.o \
../PW/mix_pot.o \
../PW/mode_group.o \
../PW/multable.o \
../PW/n_plane_waves.o \
../PW/new_ns.o \
../PW/ns_adj.o \
../PW/newd.o \
../PW/noncol.o \
../PW/ortho.o \
../PW/orthoatwfc.o \
../PW/para.o \
../PW/potinit.o \
../PW/print_clock_pw.o \
../PW/psymrho.o \
../PW/psymrho_mag.o \
../PW/pwcom.o \
../PW/pw_gemm.o \
../PW/pw_restart.o \
../PW/qvan2.o \
../PW/rcgdiagg.o \
../PW/rdiaghg.o \
../PW/read_file.o \
../PW/readin.o \
../PW/read_ncpp.o \
../PW/realus.o \
../PW/restart.o \
../PW/report_mag.o \
../PW/rgen.o \
../PW/rho2zeta.o \
../PW/rinitcgg.o \
../PW/rotate_wfc.o \
../PW/rotate_wfc_gamma.o \
../PW/rotate_wfc_nc.o \
../PW/ruotaijk.o \
../PW/s_1psi.o \
../PW/s_axis_to_ca.o \
../PW/s_gemm.o \
../PW/s_psi.o \
../PW/s_psi_nc.o \
../PW/save_in_cbands.o \
../PW/save_in_electrons.o \
../PW/save_in_ions.o \
../PW/scale_h.o \
../PW/seqopn.o \
../PW/set_fft_dim.o \
../PW/set_hubbard_l.o \
../PW/set_kplusq.o \
../PW/set_kup_and_kdw.o \
../PW/set_rhoc.o \
../PW/set_vrs.o \
../PW/setlocal.o \
../PW/setqf.o \
../PW/setupkpt.o \
../PW/sgam_at.o \
../PW/sgam_at_mag.o \
../PW/sgam_ph.o \
../PW/sgama.o \
../PW/show_memory.o \
../PW/smallg_q.o \
../PW/spinor.o \
../PW/sph_ind.o \
../PW/startup.o \
../PW/struct_fact.o \
../PW/sum_band.o \
../PW/sumkg.o \
../PW/sumkt.o \
../PW/summary.o \
../PW/swap.o \
../PW/symrho.o \
../PW/symrho_mag.o \
../PW/symtns.o \
../PW/symvect.o \
../PW/symz.o \
../PW/tabd.o \
../PW/trntns.o \
../PW/trnvecc.o \
../PW/trnvect.o \
../PW/tweights.o \
../PW/update_pot.o \
../PW/updathes.o \
../PW/upf_to_internal.o \
../PW/usnldiag.o \
../PW/usnldiag_nc.o \
../PW/v_of_rho.o \
../PW/vhpsi.o \
../PW/vhpsi_nc.o \
../PW/vloc_of_g.o \
../PW/vloc_psi.o \
../PW/vpack.o \
../PW/w0gauss.o \
../PW/w1gauss.o \
../PW/wfcinit.o \
../PW/wgauss.o \
../PW/write_ns.o \
../PW/wsweight.o

TLDEPS= bindir mods libs pw ph

all : tldeps d3.x

d3.x : $(D3OBJS) $(PHOBJS) $(PWOBJS) $(MODULES) $(LIBOBJS)
	$(MPIF90) $(LDFLAGS) -o d3.x $(D3OBJS) $(PHOBJS) $(PWOBJS) $(MODULES) $(LIBOBJS) $(LIBS)
	- ( cd ../bin ; ln -fs ../D3/d3.x . )
tldeps:
	test -n "$(TLDEPS)" && ( cd .. ; $(MAKE) $(MFLAGS) $(TLDEPS) || exit 1) || :

clean :
	- /bin/rm -f d3.x *.o *~ *.F90 *.d *.i *.mod work.pc

include make.depend
